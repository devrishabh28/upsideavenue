<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{fragments/imports :: imports(metaTitle='Purchase')}">
</head>

<body>
    <nav th:replace="~{fragments/header :: nav}"></nav>

    <div class="container">
        <div class="p-5 mb-4 text-bg-light rounded-3">
            <div class="container-fluid py-5">
                <div class="row">
                    <h5 class="display-6 fw-bold col-md-8 col-sm-12 col-lg-10">Purchase</h5>
                    <div class="dropdown col-sm-12 col-md-4 col-lg-2">
                        <button type="button" class="btn btn-primary dropdown-toggle " data-bs-toggle="dropdown">
                            Filter
                            <span class="caret"></span>
                        </button>
                        <div class="dropdown-menu">
                            <form method="post" th:action="@{/purchase}" th:object="${search}" class="m-3">

                                <label class="form-label">City</label>
                                <input type="text" class="form-control" th:field="*{city}" placeholder="City">

                                <label class="form-label mt-3">State</label>
                                <input type="text" class="form-control" th:field="*{state}" placeholder="State">

                                <label class="form-label mt-3">Area</label>
                                <div class="form-group row">
                                    <div class="col-sm-6">
                                        <input type="number" class="form-control" th:field="*{minSize}"
                                            placeholder="Min">
                                    </div>
                                    <div class="col-sm-6">
                                        <input type="number" class="form-control" th:field="*{maxSize}"
                                            placeholder="Max">
                                    </div>
                                </div>

                                <label class="form-label mt-3">Temp Mode Label</label>
                                <select th:field="*{mode}" class="form-select">
                                    <option th:text="Any" th:value="${null}">All</option>
                                    <option th:text="Rent" value="RENT">Mode1</option>
                                    <option th:text="Sale" value="SALE">Mode2</option>
                                </select>

                                <label class="form-label mt-3">Price</label>
                                <div class="form-group row">
                                    <div class="col-sm-6">
                                        <input type="number" class="form-control" th:field="*{minPrice}"
                                            placeholder="Min">
                                    </div>
                                    <div class="col-sm-6">
                                        <input type="number" class="form-control" th:field="*{maxPrice}"
                                            placeholder="Max">
                                    </div>
                                </div>

                                <label class="form-label mt-3">Furnishing</label>
                                <select th:field="*{furnished}" class="form-select">
                                    <option th:text="Any" th:value="${null}">All</option>
                                    <option th:text="Furnished" value="FURNISHED">Furnishing1</option>
                                    <option th:text="Semifurnished" value="SEMIFURNISHED">Furnishing2</option>
                                    <option th:text="Unfurnished" value="UNFURNISHED">Furnishing3</option>
                                </select>

                                <button type="submit" class="btn btn-primary mt-3">
                                    Search
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div th:if="${ not#lists.isEmpty(posts)}" class="container">
        <div class="row">
            <div th:each="post: ${posts}" class="col-md-6 col-lg-4 mb-4" th:if="${post.filter(search)}">
                <div class="h-100 border rounded-3" th:classappend="${post.isRent() ? '' : 'text-bg-light'}">
                    <img th:src="@{${'/image/display/' + post.propertyId.getPhotos().get(0).photoId}}" alt=""
                        th:if="${ not#lists.isEmpty(post.propertyId.photos)}" style="width: 100%;">

                    <div class="p-5">
                        <h4 th:text="${post.propertyId.propertyName}" class="mb-0"></h4>
                        <div class="d-flex mb-1">
                            <p th:text="'&nbsp;&#36;' + ${post.price}" class="m-0 p-0 fw-bold"></p>
                        </div>

                        <div class="mb-2">
                            <p th:text="${post.mode}" style="font-size: 10px; padding: 6px 10px;"
                                class="my-0 badge rounded-pill text-bg-dark fw-bold">
                                Size
                            </p>
                            <p th:text="${post.propertyId.propertySize} + ' sq ft.'"
                                style="font-size: 10px; padding: 6px 10px;"
                                class="my-0 badge rounded-pill text-bg-dark fw-bold">
                                Size
                            </p>
                            <p th:text="${post.propertyId.propertyType}" style="font-size: 10px; padding: 6px 10px;"
                                class="my-0 badge rounded-pill text-bg-dark fw-bold">
                                Property Type
                            </p>
                            <p th:text="${post.propertyId.bedrooms} + ' BHK'"
                                style="font-size: 10px; padding: 6px 10px;"
                                class="my-0 badge rounded-pill text-bg-dark fw-bold">
                                BHK
                            </p>
                            <p th:text="${post.propertyId.furnished}" style="font-size: 10px; padding: 6px 10px;"
                                class="my-0 badge rounded-pill text-bg-dark fw-bold">
                                Furnished
                            </p>
                        </div>

                        <p th:text="${post.agentId.accountname}" class="m-0 p-0 mb-3 fw-bold"></p>
                        <p th:text="${post.postDate}" class="mb-5"></p>

                        <p th:text="${post.description}" class="m-0 p-0 mb-4"></p>

                        <a class="btn btn-outline-dark" th:href="@{'/posts/' + ${post.postId}}">
                            Interested
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer th:replace=" ~{fragments/footer :: footer}">
    </footer>


</body>

</html>